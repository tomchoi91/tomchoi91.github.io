<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Tom Choi" />

<meta name="date" content="2022-07-27" />

<title>Propensity Score Matching</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Dongho Choi</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="research.html">Research</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Stat/ML
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="stat1.html">Predicting House Prices in Iowa</a>
    </li>
    <li>
      <a href="psm.html">Propensity Score Matching</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    DB/SQL
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="dbsql1.html">Movie Explorer</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Visualization
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualization1.html">Squid Game Elimination Analysis</a>
    </li>
    <li>
      <a href="visualization2.html">Milk Production Data Exploration</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fas fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/tomchoi91/">
    <span class="fab fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/tomchoi91/">
    <span class="fab fa-linkedin-in"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Propensity Score Matching</h1>
<h3 class="subtitle">Using GBSG2: German Breast Cancer Study Group 2
data</h3>
<h4 class="author">Tom Choi</h4>
<h4 class="date">2022-07-27</h4>

</div>


<pre class="r"><code>library(tidyverse)
library(flextable)
library(TH.data)
library(gtsummary)
library(MatchIt)
library(cobalt)</code></pre>
<div id="dataset-overview" class="section level2">
<h2>1. Dataset overview</h2>
<p><strong>Description</strong></p>
<p>A data frame containing the observations from the GBSG2 study
(n=686).</p>
<p><strong>Variables</strong></p>
<ul>
<li><code>horTh</code>: hormonal therapy, a factor at two levels no and
yes.</li>
<li><code>age</code>: age of the patients in years.</li>
<li><code>menostat</code>: menopausal status, a factor at two levels pre
(premenopausal) and post (postmenopausal).</li>
<li><code>tsize</code>: tumor size (in mm).</li>
<li><code>tgrade</code>: tumor grade, a ordered factor at levels I &lt;
II &lt; III.</li>
<li><code>pnodes</code>: number of positive nodes.</li>
<li><code>progrec</code>: progesterone receptor (in fmol).</li>
<li><code>estrec</code>: estrogen receptor (in fmol).</li>
<li><code>time</code>: recurrence free survival time (in days).</li>
<li><code>cens</code>: censoring indicator (0- censored, 1- event).</li>
</ul>
<p><strong>Source</strong></p>
<p>W. Sauerbrei and P. Royston (1999). Building multivariable prognostic
and diagnostic models: transformation of the predictors by using
fractional polynomials. Journal of the Royal Statistics Society Series
A, Volume 162(1), 71–94.</p>
</div>
<div id="summary-table" class="section level2">
<h2>2. Summary table</h2>
<p>Following is a summary table of the data set. There were significant
difference in the <code>age</code> (P&lt;0.001), <code>menostat</code>
(P&lt;0.001), and <code>estrec</code> (P=0.009) variables between
hormone therapy treatments(no vs. yes).</p>
<pre class="r"><code>GBSG2 %&gt;% tbl_summary(by=horTh) %&gt;% add_overall() %&gt;% add_p() %&gt;% separate_p_footnotes()</code></pre>
<div id="azywddnsoj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#azywddnsoj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#azywddnsoj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#azywddnsoj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#azywddnsoj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#azywddnsoj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#azywddnsoj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#azywddnsoj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#azywddnsoj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#azywddnsoj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#azywddnsoj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#azywddnsoj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#azywddnsoj .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#azywddnsoj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#azywddnsoj .gt_from_md > :first-child {
  margin-top: 0;
}

#azywddnsoj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#azywddnsoj .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#azywddnsoj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#azywddnsoj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#azywddnsoj .gt_row_group_first td {
  border-top-width: 2px;
}

#azywddnsoj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#azywddnsoj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#azywddnsoj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#azywddnsoj .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#azywddnsoj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#azywddnsoj .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#azywddnsoj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#azywddnsoj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#azywddnsoj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#azywddnsoj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#azywddnsoj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#azywddnsoj .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#azywddnsoj .gt_left {
  text-align: left;
}

#azywddnsoj .gt_center {
  text-align: center;
}

#azywddnsoj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#azywddnsoj .gt_font_normal {
  font-weight: normal;
}

#azywddnsoj .gt_font_bold {
  font-weight: bold;
}

#azywddnsoj .gt_font_italic {
  font-style: italic;
}

#azywddnsoj .gt_super {
  font-size: 65%;
}

#azywddnsoj .gt_two_val_uncert {
  display: inline-block;
  line-height: 1em;
  text-align: right;
  font-size: 60%;
  vertical-align: -0.25em;
  margin-left: 0.1em;
}

#azywddnsoj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#azywddnsoj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#azywddnsoj .gt_slash_mark {
  font-size: 0.7em;
  line-height: 0.7em;
  vertical-align: 0.15em;
}

#azywddnsoj .gt_fraction_numerator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: 0.45em;
}

#azywddnsoj .gt_fraction_denominator {
  font-size: 0.6em;
  line-height: 0.6em;
  vertical-align: -0.05em;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Overall</strong>, N = 686<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>no</strong>, N = 440<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>yes</strong>, N = 246<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">age</td>
<td class="gt_row gt_center">53 (46, 61)</td>
<td class="gt_row gt_center">50 (45, 59)</td>
<td class="gt_row gt_center">58 (50, 63)</td>
<td class="gt_row gt_center"><0.001<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">menostat</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"><0.001<sup class="gt_footnote_marks">3</sup></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Pre</td>
<td class="gt_row gt_center">290 (42%)</td>
<td class="gt_row gt_center">231 (52%)</td>
<td class="gt_row gt_center">59 (24%)</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Post</td>
<td class="gt_row gt_center">396 (58%)</td>
<td class="gt_row gt_center">209 (48%)</td>
<td class="gt_row gt_center">187 (76%)</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">tsize</td>
<td class="gt_row gt_center">25 (20, 35)</td>
<td class="gt_row gt_center">25 (20, 35)</td>
<td class="gt_row gt_center">25 (20, 35)</td>
<td class="gt_row gt_center">0.5<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">tgrade</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.3<sup class="gt_footnote_marks">3</sup></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">I</td>
<td class="gt_row gt_center">81 (12%)</td>
<td class="gt_row gt_center">48 (11%)</td>
<td class="gt_row gt_center">33 (13%)</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">II</td>
<td class="gt_row gt_center">444 (65%)</td>
<td class="gt_row gt_center">281 (64%)</td>
<td class="gt_row gt_center">163 (66%)</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">III</td>
<td class="gt_row gt_center">161 (23%)</td>
<td class="gt_row gt_center">111 (25%)</td>
<td class="gt_row gt_center">50 (20%)</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left">pnodes</td>
<td class="gt_row gt_center">3 (1, 7)</td>
<td class="gt_row gt_center">3 (1, 7)</td>
<td class="gt_row gt_center">3 (1, 7)</td>
<td class="gt_row gt_center">0.4<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">progrec</td>
<td class="gt_row gt_center">32 (7, 132)</td>
<td class="gt_row gt_center">32 (7, 130)</td>
<td class="gt_row gt_center">35 (7, 133)</td>
<td class="gt_row gt_center">0.6<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">estrec</td>
<td class="gt_row gt_center">36 (8, 114)</td>
<td class="gt_row gt_center">32 (8, 92)</td>
<td class="gt_row gt_center">46 (9, 182)</td>
<td class="gt_row gt_center">0.009<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">time</td>
<td class="gt_row gt_center">1,084 (568, 1,685)</td>
<td class="gt_row gt_center">967 (548, 1,573)</td>
<td class="gt_row gt_center">1,220 (696, 1,818)</td>
<td class="gt_row gt_center"><0.001<sup class="gt_footnote_marks">2</sup></td></tr>
    <tr><td class="gt_row gt_left">cens</td>
<td class="gt_row gt_center">299 (44%)</td>
<td class="gt_row gt_center">205 (47%)</td>
<td class="gt_row gt_center">94 (38%)</td>
<td class="gt_row gt_center">0.034<sup class="gt_footnote_marks">3</sup></td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">1</sup> Median (IQR); n (%)</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">2</sup> Wilcoxon rank sum test</td>
    </tr>
    <tr>
      <td class="gt_footnote" colspan="5"><sup class="gt_footnote_marks">3</sup> Pearson's Chi-squared test</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
<div id="matching-using-nearest-neighbor" class="section level2">
<h2>3. Matching using nearest neighbor</h2>
<p>Following is the result of 1:1 nearest neighbor matching without
replacement</p>
<pre class="r"><code>matched &lt;- matchit(formula = horTh ~ age + menostat + tsize + tgrade + pnodes + progrec + estrec, data = GBSG2)
matched</code></pre>
<pre><code>## A matchit object
##  - method: 1:1 nearest neighbor matching without replacement
##  - distance: Propensity score
##              - estimated with logistic regression
##  - number of obs.: 686 (original), 492 (matched)
##  - target estimand: ATT
##  - covariates: age, menostat, tsize, tgrade, pnodes, progrec, estrec</code></pre>
<pre class="r"><code>summary(matched)</code></pre>
<pre><code>## 
## Call:
## matchit(formula = horTh ~ age + menostat + tsize + tgrade + pnodes + 
##     progrec + estrec, data = GBSG2)
## 
## Summary of Balance for All Data:
##              Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean
## distance            0.4157        0.3267          0.6761     0.8882    0.1738
## age                56.6220       51.0568          0.5911     0.8931    0.1025
## menostatPre         0.2398        0.5250         -0.6679          .    0.2852
## menostatPost        0.7602        0.4750          0.6679          .    0.2852
## tsize              28.8049       29.6227         -0.0579     0.9614    0.0177
## tgradeI             0.1341        0.1091          0.0735          .    0.0251
## tgradeII            0.6626        0.6386          0.0507          .    0.0240
## tgradeIII           0.2033        0.2523         -0.1218          .    0.0490
## pnodes              5.1301        4.9432          0.0350     0.9209    0.0102
## progrec           124.2927      102.0023          0.0893     2.1571    0.0177
## estrec            125.8171       79.7227          0.2412     2.3660    0.0762
##              eCDF Max
## distance       0.3272
## age            0.2738
## menostatPre    0.2852
## menostatPost   0.2852
## tsize          0.0450
## tgradeI        0.0251
## tgradeII       0.0240
## tgradeIII      0.0490
## pnodes         0.0539
## progrec        0.0496
## estrec         0.1417
## 
## 
## Summary of Balance for Matched Data:
##              Means Treated Means Control Std. Mean Diff. Var. Ratio eCDF Mean
## distance            0.4157        0.4105          0.0398     1.1060    0.0083
## age                56.6220       56.2398          0.0406     1.0584    0.0119
## menostatPre         0.2398        0.2439         -0.0095          .    0.0041
## menostatPost        0.7602        0.7561          0.0095          .    0.0041
## tsize              28.8049       29.1545         -0.0248     1.0651    0.0120
## tgradeI             0.1341        0.1179          0.0477          .    0.0163
## tgradeII            0.6626        0.6829         -0.0430          .    0.0203
## tgradeIII           0.2033        0.1992          0.0101          .    0.0041
## pnodes              5.1301        5.3943         -0.0495     0.7438    0.0108
## progrec           124.2927      117.0447          0.0290     1.6818    0.0120
## estrec            125.8171      112.6667          0.0688     1.5573    0.0165
##              eCDF Max Std. Pair Dist.
## distance       0.0366          0.0428
## age            0.0447          0.5700
## menostatPre    0.0041          0.0095
## menostatPost   0.0041          0.0095
## tsize          0.0407          0.9500
## tgradeI        0.0163          0.5487
## tgradeII       0.0203          0.8683
## tgradeIII      0.0041          0.7374
## pnodes         0.0407          0.9519
## progrec        0.0488          0.5928
## estrec         0.0528          0.5584
## 
## Sample Sizes:
##           Control Treated
## All           440     246
## Matched       246     246
## Unmatched     194       0
## Discarded       0       0</code></pre>
</div>
<div id="matched-data-n492" class="section level2">
<h2>4. Matched data (n=492)</h2>
<p>Following is first 6 rows of the matched data.</p>
<pre class="r"><code>data &lt;- match.data(matched)

head(data)  %&gt;%
    flextable() %&gt;%
    autofit()</code></pre>
<template id="e66dbeb4-31da-4b38-8573-520ffda283b0"><style>
.tabwid table{
  border-spacing:0px !important;
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
</style><div class="tabwid"><style>.cl-06def852{}.cl-06cbe5c8{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-06cbe5c9{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-06cbe5ca{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-06cbe5cb{width:51.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5cc{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5cd{width:49.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5ce{width:43.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5cf{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5d0{width:72.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5d1{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06cbe5d2{width:50.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce494e{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce494f{width:43.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4950{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4951{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4952{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4953{width:43.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4954{width:51.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4955{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4956{width:49.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4957{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06ce4958{width:50.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0ab9e{width:72.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0ab9f{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba0{width:43.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba1{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba2{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba3{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba4{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba5{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba6{width:43.2pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba7{width:51.7pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d0aba8{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db2{width:72.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db3{width:49.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db4{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db5{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db6{width:50.5pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db7{width:43.8pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db8{width:72.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30db9{width:43.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30dba{width:50.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30dbb{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d30dbc{width:43.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fc6{width:49.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fc7{width:51.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fc8{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fc9{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fca{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fcb{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fcc{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fcd{width:51.7pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fce{width:49.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fcf{width:57.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d56fd0{width:43.2pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d216{width:38.9pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d217{width:50.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d218{width:48.1pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d219{width:65.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d21a{width:72.5pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d21b{width:56.6pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d21c{width:63.3pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-06d7d21d{width:43.8pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table class='cl-06def852'>
<thead><tr style="overflow-wrap:break-word;"><td class="cl-06d56fce"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">horTh</span></p></td><td class="cl-06d7d216"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">age</span></p></td><td class="cl-06d7d219"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">menostat</span></p></td><td class="cl-06d56fd0"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">tsize</span></p></td><td class="cl-06d56fcd"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">tgrade</span></p></td><td class="cl-06d7d21b"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">pnodes</span></p></td><td class="cl-06d56fcf"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">progrec</span></p></td><td class="cl-06d7d217"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">estrec</span></p></td><td class="cl-06d7d218"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">time</span></p></td><td class="cl-06d7d21d"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">cens</span></p></td><td class="cl-06d7d21a"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">distance</span></p></td><td class="cl-06d56fcf"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">weights</span></p></td><td class="cl-06d7d21c"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">subclass</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-06cbe5cd"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">no</span></p></td><td class="cl-06cbe5cc"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">70</span></p></td><td class="cl-06ce4950"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06cbe5ce"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">21</span></p></td><td class="cl-06cbe5cb"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06cbe5cf"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">3</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">48</span></p></td><td class="cl-06cbe5d2"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">66</span></p></td><td class="cl-06ce494e"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1,814</span></p></td><td class="cl-06ce494f"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06cbe5d0"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.5203676</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06ce4951"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">120</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06cbe5cd"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">yes</span></p></td><td class="cl-06cbe5cc"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">56</span></p></td><td class="cl-06ce4950"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06cbe5ce"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">12</span></p></td><td class="cl-06cbe5cb"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06cbe5cf"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">7</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">61</span></p></td><td class="cl-06cbe5d2"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">77</span></p></td><td class="cl-06ce494e"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">2,018</span></p></td><td class="cl-06ce494f"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06cbe5d0"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.4563422</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06ce4951"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">36</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06ce4956"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">yes</span></p></td><td class="cl-06ce4957"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">58</span></p></td><td class="cl-06ce4955"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06d0aba0"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">35</span></p></td><td class="cl-06ce4954"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06d0ab9f"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">9</span></p></td><td class="cl-06ce4952"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">52</span></p></td><td class="cl-06ce4958"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">271</span></p></td><td class="cl-06d0aba1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">712</span></p></td><td class="cl-06ce4953"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d0ab9e"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.4939083</span></p></td><td class="cl-06ce4952"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d0aba2"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">84</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06cbe5cd"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">yes</span></p></td><td class="cl-06cbe5cc"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">59</span></p></td><td class="cl-06ce4950"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06cbe5ce"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">17</span></p></td><td class="cl-06cbe5cb"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06cbe5cf"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">4</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">60</span></p></td><td class="cl-06cbe5d2"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">29</span></p></td><td class="cl-06ce494e"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1,807</span></p></td><td class="cl-06ce494f"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06cbe5d0"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.4562091</span></p></td><td class="cl-06cbe5d1"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06ce4951"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">118</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06d30db3"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">no</span></p></td><td class="cl-06d0aba5"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">73</span></p></td><td class="cl-06d0aba8"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06d0aba6"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">35</span></p></td><td class="cl-06d0aba7"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06d0aba4"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d0aba3"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">26</span></p></td><td class="cl-06d30db6"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">65</span></p></td><td class="cl-06d30db5"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">772</span></p></td><td class="cl-06d30db7"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d30db2"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.5253295</span></p></td><td class="cl-06d0aba3"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d30db4"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">83</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-06d56fc6"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">yes</span></p></td><td class="cl-06d56fca"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">59</span></p></td><td class="cl-06d56fcb"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">Post</span></p></td><td class="cl-06d30dbc"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">8</span></p></td><td class="cl-06d56fc7"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">II</span></p></td><td class="cl-06d56fc8"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">2</span></p></td><td class="cl-06d56fc9"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">181</span></p></td><td class="cl-06d30dba"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0</span></p></td><td class="cl-06d56fcc"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">2,172</span></p></td><td class="cl-06d30db9"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0</span></p></td><td class="cl-06d30db8"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">0.4561443</span></p></td><td class="cl-06d56fc9"><p class="cl-06cbe5ca"><span class="cl-06cbe5c8">1</span></p></td><td class="cl-06d30dbb"><p class="cl-06cbe5c9"><span class="cl-06cbe5c8">240</span></p></td></tr></tbody></table></div></template>
<div class="flextable-shadow-host" id="7f65d74a-31f4-464e-975d-144146b1b90e"></div>
<script>
var dest = document.getElementById("7f65d74a-31f4-464e-975d-144146b1b90e");
var template = document.getElementById("e66dbeb4-31da-4b38-8573-520ffda283b0");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
</script>

</div>
<div id="covariates-vs.-propensity-score" class="section level2">
<h2>5. Covariates vs. Propensity Score</h2>
<p>Following is visual inspection of whether matching is done well using
a loess smoother to estimate the mean of each covariate, by treatment
status, at each value of the propensity score.</p>
<pre class="r"><code>plot1 &lt;- data %&gt;%
    mutate(across(!horTh,as.numeric)) %&gt;%
    pivot_longer(cols = age:progrec, names_to = &quot;variable&quot;, values_to = &quot;response&quot;) %&gt;%
    ggplot(aes(x = distance, y = response, color = as.factor(horTh))) +
    geom_point(alpha = 0.2, size = 1.3) +
    geom_smooth(method = &quot;loess&quot;, se = F) +
    labs(x=&quot;Propensity score&quot;, y=&quot;&quot;, color = &quot;horTh&quot;)+
    theme_bw() +
    facet_wrap(vars(variable), scales = &quot;free&quot;, ncol = 2)

plot1</code></pre>
<p><img src="psm_files/figure-html/plot1-1.png" width="2100" /></p>
</div>
<div id="change-of-absolute-standardised-differences"
class="section level2">
<h2>6. Change of Absolute Standardised Differences</h2>
</div>
<div id="distribution-of-propensity-score" class="section level2">
<h2>7. Distribution of Propensity Score</h2>
<p>Following is the visualization of distribution of propensity scores
(distance) of those who were matched.</p>
<pre class="r"><code>plot(matched, type = &quot;jitter&quot;, col = &quot;blue&quot;, interactive = FALSE)</code></pre>
<p><img src="psm_files/figure-html/plot3-1.png" width="2100" /></p>
</div>
<div id="histogram-of-propensity-score" class="section level2">
<h2>8. Histogram of Propensity Score</h2>
<p>Following is the visualization of distribution of propensity scores
(distance) before and after matching.</p>
<pre class="r"><code>plot(matched, type = &quot;hist&quot;, interactive = FALSE)</code></pre>
<p><img src="psm_files/figure-html/plot4-1.png" width="2100" /></p>
</div>
<div id="balance-table" class="section level2">
<h2>9. Balance Table</h2>
<pre class="r"><code>bal.tab(matched, un = TRUE, stats = c(&quot;m&quot;, &quot;v&quot;))</code></pre>
<pre><code>## Call
##  matchit(formula = horTh ~ age + menostat + tsize + tgrade + pnodes + 
##     progrec + estrec, data = GBSG2)
## 
## Balance Measures
##                   Type Diff.Un V.Ratio.Un Diff.Adj V.Ratio.Adj
## distance      Distance  0.6761     0.8882   0.0398      1.1060
## age            Contin.  0.5911     0.8931   0.0406      1.0584
## menostat_Post   Binary  0.2852          .   0.0041           .
## tsize          Contin. -0.0579     0.9614  -0.0248      1.0651
## tgrade_I        Binary  0.0251          .   0.0163           .
## tgrade_II       Binary  0.0240          .  -0.0203           .
## tgrade_III      Binary -0.0490          .   0.0041           .
## pnodes         Contin.  0.0350     0.9209  -0.0495      0.7438
## progrec        Contin.  0.0893     2.1571   0.0290      1.6818
## estrec         Contin.  0.2412     2.3660   0.0688      1.5573
## 
## Sample sizes
##           Control Treated
## All           440     246
## Matched       246     246
## Unmatched     194       0</code></pre>
</div>
<div id="love-plot" class="section level2">
<h2>10. Love plot</h2>
<div id="standardized-mean-differences" class="section level3">
<h3>10-1. Standardized mean differences</h3>
<pre class="r"><code>love.plot(matched, stats=&quot;mean.diffs&quot;, binary=&quot;std&quot;, 
          var.order=&quot;unadjusted&quot;, grid=TRUE, thresholds=0.1,
          sample.names= c(&quot;Unmatched&quot;, &quot;Matched&quot;))</code></pre>
<p><img src="psm_files/figure-html/loveplot1-1.png" width="2100" /></p>
</div>
<div id="variance" class="section level3">
<h3>10-2. Variance</h3>
<pre class="r"><code>love.plot(matched, stats = &quot;variance.ratios&quot;, 
          var.order = &quot;unadjusted&quot;, grid=TRUE, thresholds=2, 
          sample.names= c(&quot;Unmatched&quot;, &quot;Matched&quot;))</code></pre>
<p><img src="psm_files/figure-html/loveplot2-1.png" width="2100" /></p>
</div>
</div>
<div id="mirror-plot" class="section level2">
<h2>11. Mirror plot</h2>
<pre class="r"><code>bal.plot(matched, var.name = &quot;distance&quot;, mirror = TRUE, type = &quot;histogram&quot;, which = &quot;both&quot;)</code></pre>
<p><img src="psm_files/figure-html/mirror-1.png" width="2100" /></p>
</div>
<div id="before-and-after-propensity-score-matching"
class="section level2">
<h2>12. Before and after propensity score matching</h2>
</div>
<div id="summary-of-propensity-score-matching" class="section level2">
<h2>13. Summary of Propensity Score Matching</h2>
<p>We used propensity score matching to estimate the average marginal
effect of the horTh on cens on those who received it accounting for
confounding by the included covariates. We first attempted 1:1 nearest
neighbor propensity score matching without replacement with a propensity
score estimated using logistic regression of the treatment on the
covariates.1:1 nearest matching on the propensity score without
replacement, which yielded adequate balance, as indicated in Table and
Figure. After matching, all standardized mean differences for the
covariates were below 0.1 and all standardized mean differences for
squares and two-way interactions between covariates were below 0.15,
indicating adequate balance. The propensity score was estimated using a
logistic regression of the horTh on the covariates.</p>
</div>


<br><br>
<footer>
  <p class="copyright text-muted" align="center">Copyright &copy; 2022 Dongho Choi</p>
</footer>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4,h5",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
